!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("htmlparser2")):"function"==typeof define&&define.amd?define(["htmlparser2"],t):"object"==typeof exports?exports.htom=t(require("htmlparser2")):n.htom=t(n.htmlparser2)}(this,function(n){return function(n){var t={};function e(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=n,e.c=t,e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:o})},e.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=4)}([function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.rightPad=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return n.length>t?n:""+n+Array(t-n.length+1).join(e)},t.trim=function(n){return n.replace(/\s+/g," ")}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.anchor=t.table=t.common=void 0;var o=e(0),r=t.common={data:[],append:function(n){r.data.unshift(n)},pop:function(){r.data.shift()},lastText:function(){return r.data[0]},reset:function(){r.data=[]},markdown:function(){return r.data.reverse().join("").trim()}},u=t.table={data:[],append:function(n){u.data[0][0].unshift(n)},pop:function(){u.data[0][0].shift()},lastText:function(){return u.data[0]&&u.data[0][0]},markdown:function(){var n="",t="",e=[],r=[];return u.data.map(function(n){return n.reverse()}).forEach(function(n){e.unshift([]),n.forEach(function(n,t){var o=n.reverse().join("");e[0].push(o),(void 0===r[t]||r[t]<o.length)&&(r[t]=o.length)})}),r.forEach(function(n){t+="| "+Array(n+1).join("-")+" "}),t+="|\n",e.forEach(function(e,u){e.forEach(function(t,e){n+="| "+(0,o.rightPad)(t,r[e])+" "}),n+="|\n",0===u&&(n+=t)}),n},reset:function(){u.data=[],u.isHasHead=!1}},c=t.anchor={data:[],href:"",append:function(n){c.data.unshift(n)},pop:function(){c.data.shift()},lastText:function(){return c.data[0]},reset:function(){c.data=[],c.href=[]},markdown:function(){return"["+c.data.reverse().join("")+"]["+c.href+"]"}}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},r=e(0),u=e(1);function c(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var i=["h1","h2","h3","h4","h5","h6","p","div","blockquote","ul","ol","dl","pre","br","hr"],a=[],f=[],l="",d={},s=function(){a=[],f=[],l="",d={},u.common.reset(),u.table.reset(),u.anchor.reset()},p=function(){switch(f[0]){case"anchor":return u.anchor;case"table":return u.table;default:return u.common}},h=function(){return p().lastText()},v=function(){return p().pop()},b=function(n){return p().append(n)},m=function(n){a.unshift(n)},x=function(n){a[0]===n&&a.shift()},g=function(n){"code"===a[0]&&"pre"!==a[1]?"\n"!==n&&b(n):"pre"===a[0]||"code"===a[0]&&"pre"===a[1]?b(n):"\n"!==n&&""!==n.trim()&&b((0,r.trim)(n))},j=function(){var n=h();"\n"!==n&&"\n\n"!==n&&b("\n")},y=function(){var n=h();"\n"!==n&&"\n\n"!==n?b("\n\n"):"\n"===n&&(v(),b("\n\n"))},O=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){var e=h();x(t),"\n"===n||"\n\n"===n?"\n"===e?(v(),b("\n\n")):"\n\n"!==e&&b(n):b(n)}},k=function(n,t){var e;return c(e={},n+"open",function(n){return function(t){m(t),y(),b(Array(n+1).join("#")+" ")}}(t)),c(e,n+"text",g),c(e,n+"close",O("\n\n")),e},_=function(n,t){var e;return c(e={},n+"open",function(n){m(n),b(t)}),c(e,n+"text",g),c(e,n+"close",O(t)),e},w=o({},["p","div"].reduce(function(n,t){return o({},n,function(n){var t;return c(t={},n+"open",function(n){m(n),y(),"blockquote"===a[1]&&b("> ")}),c(t,n+"text",g),c(t,n+"close",O("\n\n")),t}(t))},{}),[1,2,3,4,5,6].reduce(function(n,t){return o({},n,k("h"+t,t))},{}),_("em","*"),_("del","~~"),_("strong","**"),{preopen:function(n){m(n),y(),b("```"),j()},pretext:g,preclose:function(n){x(n),j(),b("```"),y()}},{codeopen:function(n){a[0]&&"pre"===a[0]||b("`"),m(n)},codetext:g,codeclose:function(n){x(n),a[0]&&"pre"===a[0]||b("`")}},{blockquoteopen:function(n){m(n),y()},blockquotetext:g,blockquoteclose:O("\n\n")},["ol","ul"].reduce(function(n,t){return o({},n,function(n){var t;return c(t={},n+"open",function(n){"li"!==a[0]?y():(j(),"ul"===a[1]?l+="  ":"ol"===a[1]&&(l+="   ")),m(n)}),c(t,n+"text",function(){}),c(t,n+"close",function(n){x(n),"li"!==a[0]?y():"ul"===a[1]?l=l.slice(0,-2):"ol"===a[1]&&(l=l.slice(0,-3))}),t}(t))},{}),{liopen:function(n){"ul"===a[0]?b(l+"- "):"ol"===a[0]&&b(l+"1. "),m(n)},litext:g,liclose:function(n){x(n),"\n"!==h()&&b("\n")}},{dlopen:function(n){m(n),j()},dlclose:O("\n\n"),dtopen:function(n){m(n),b(l+"- ")},dttext:g,dtclose:O("\n"),ddopen:function(n){m(n),b(l+"  - ")},ddtext:g,ddclose:O("\n")},o({tableopen:function(n){y(),m(n),f.unshift("table")},tableclose:function(n){f.shift(),x(n),b(u.table.markdown()),y(),u.table.reset()},tropen:function(){u.table.data.unshift([])}},["th","td"].reduce(function(n,t){var e;return o({},n,(c(e={},t+"open",function(n){u.table.data[0].unshift([]),m(n)}),c(e,t+"text",g),c(e,t+"close",function(n){x(n)}),e))},{})),{aopen:function(n,t){m(n);var e=t.href;d[e]||(d[e]=Object.keys(d).length+1),u.anchor.href=d[e],f.unshift("anchor")},atext:g,aclose:function(n){f.shift(),x(n),b(u.anchor.markdown()),u.anchor.reset()}},{inputopen:function(n,t){a[0]&&"li"===a[0]&&b("["+(void 0!==t.checked?"x":" ")+"] ")},hropen:function(){y(),b("----------------"),y()},bropen:y,imgopen:function(n,t){var e=t.alt,o=t.src;b("!["+(e||"image")+"]("+o+")")}});t.default=function(n,t){return{onopentag:function(n,t){var e=n+"open";if(w[e]){if(("anchor"===f[0]||"table"===f[0])&&-1!==i.indexOf(n))return;w[e](n,t)}},onclosetag:function(n){var t=n+"close";if(w[t]){if(("anchor"===f[0]||"table"===f[0])&&-1!==i.indexOf(n))return;w[t](n)}},ontext:function(n){var t=a[0]+"text";w[t]&&w[t](n)},onreset:s,onerror:function(n){return t(n)},onend:function(){return n(""+p().markdown()+Object.keys(d).reduce(function(n,t){return n+"\n["+d[t]+"]: "+t},"\n"))}}}},function(t,e){t.exports=n},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=u(e(3)),r=u(e(2));function u(n){return n&&n.__esModule?n:{default:n}}t.default=function(n){return new Promise(function(t,e){var u=new o.default.Parser((0,r.default)(t,e),{decodeEntities:!0,xmlMode:!0});u.write(n),u.end()})}}])});