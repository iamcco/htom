!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("htmlparser2")):"function"==typeof define&&define.amd?define(["htmlparser2"],t):"object"==typeof exports?exports.htom=t(require("htmlparser2")):n.htom=t(n.htmlparser2)}(this,function(n){return function(n){var t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:r})},e.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=4)}([function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.rightPad=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return n.length>t?n:""+n+Array(t-n.length+1).join(e)},t.trim=function(n){return n.replace(/\s+/g," ")}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.header=t.anchor=t.table=t.common=void 0;var r=e(0),o=t.common={data:[],append:function(n){o.data.unshift(n)},pop:function(){o.data.shift()},lastText:function(){return o.data[0]},reset:function(){o.data=[]},markdown:function(){var n=o.data.reverse().join("").trim();return o.reset(),n}},a=t.table={extra:[],data:[],append:function(n){a.data[0]&&a.data[0][0]?a.data[0][0].unshift(n):a.extra.unshift(n)},pop:function(){a.data[0]&&a.data[0][0]?a.data[0][0].shift():a.extra.shift()},lastText:function(){return a.data[0]&&a.data[0][0]},markdown:function(){var n="",t="",e=[],o=[];return a.data.map(function(n){return n.reverse()}).forEach(function(n){e.unshift([]),n.forEach(function(n,t){var r=n.reverse().join("");e[0].push(r),(void 0===o[t]||o[t]<r.length)&&(o[t]=r.length)})}),o.forEach(function(n){t+="| "+Array(n+1).join("-")+" "}),t+="|\n",e.forEach(function(e,a){e.forEach(function(t,e){n+="| "+(0,r.rightPad)(t,o[e])+" "}),n+="|\n",0===a&&(n+=t)}),a.extra.length&&(n=a.extra.reverse().join("")+"\n\n"+n),a.reset(),n},reset:function(){a.extra=[],a.data=[],a.isHasHead=!1}},u=t.anchor={data:[],href:"",append:function(n){u.data.unshift(n)},pop:function(){u.data.shift()},lastText:function(){return u.data[0]},reset:function(){u.data=[],u.href=""},markdown:function(){var n="["+u.data.reverse().join("")+"]["+u.href+"]";return u.reset(),n}},i=t.header={data:[],id:"",append:function(n){i.data.unshift(n)},pop:function(){i.data.shift()},lastText:function(){return i.data[0]},reset:function(){i.data=[],i.id=""},markdown:function(){var n=i.data.reverse().join("");return i.reset(),n}}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},o=e(0),a=e(1);function u(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var i=["h1","h2","h3","h4","h5","h6","p","div","blockquote","ul","ol","dl","pre","br","hr"],c=[],f=[],d="",l={},s=function(){switch(f[0]){case"anchor":return a.anchor;case"table":return a.table;case"header":return a.header;default:return a.common}},p=function(){return s().lastText()},h=function(){return s().pop()},v=function(n){return s().append(n)},b=function(n){c.unshift(n)},x=function(n){c[0]===n&&c.shift()},m=function(n){"code"===c[0]&&"pre"!==c[1]?"\n"!==n&&v(n):"pre"===c[0]||"code"===c[0]&&"pre"===c[1]?v(n):"\n"!==n&&""!==n.trim()&&v((0,o.trim)(n))},g=function(){var n=p();"\n"!==n&&"\n\n"!==n&&v("\n")},j=function(){var n=p();"\n"!==n&&"\n\n"!==n?v("\n\n"):"\n"===n&&(h(),v("\n\n"))},y=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){var e=p();x(t),"\n"===n||"\n\n"===n?"\n"===e?(h(),v("\n\n")):"\n\n"!==e&&v(n):v(n)}},k=function(n,t){var e;return u(e={},n+"open",function(n){return function(t,e){j(),v(Array(n+1).join("#")+" "),b(t),a.header.id=e.id,f.unshift("header")}}(t)),u(e,n+"text",m),u(e,n+"close",function(n){f.shift(),x(n);var t=a.header.id,e=a.header.markdown();v(e),j(),t&&(l[t]=e)}),e},O=function(n,t){var e;return u(e={},n+"open",function(n){b(n),v(t)}),u(e,n+"text",m),u(e,n+"close",y(t)),e},w=r({},["p","div"].reduce(function(n,t){return r({},n,function(n){var t;return u(t={},n+"open",function(n){b(n),j(),"blockquote"===c[1]&&v("> ")}),u(t,n+"text",m),u(t,n+"close",y("\n\n")),t}(t))},{}),[1,2,3,4,5,6].reduce(function(n,t){return r({},n,k("h"+t,t))},{}),O("em","*"),O("del","~~"),O("strong","**"),O("caption","**"),{preopen:function(n,t){b(n),j();var e=t["data-language"]||"";v("```"+e),g()},pretext:m,preclose:function(n){x(n),g(),v("```"),j()}},{codeopen:function(n){c[0]&&"pre"===c[0]||v("`"),b(n)},codetext:m,codeclose:function(n){x(n),c[0]&&"pre"===c[0]||v("`")}},{blockquoteopen:function(n){b(n),j()},blockquotetext:m,blockquoteclose:y("\n\n")},["ol","ul"].reduce(function(n,t){return r({},n,function(n){var t;return u(t={},n+"open",function(n){"li"!==c[0]?j():(g(),"ul"===c[1]?d+="  ":"ol"===c[1]&&(d+="   ")),b(n)}),u(t,n+"text",function(){}),u(t,n+"close",function(n){x(n),"li"!==c[0]?j():"ul"===c[1]?d=d.slice(0,-2):"ol"===c[1]&&(d=d.slice(0,-3))}),t}(t))},{}),{liopen:function(n){"ul"===c[0]?v(d+"- "):"ol"===c[0]&&v(d+"1. "),b(n)},litext:m,liclose:function(n){x(n),"\n"!==p()&&v("\n")}},{dlopen:function(n){b(n),g()},dlclose:y("\n\n"),dtopen:function(n){b(n),v(d+"- ")},dttext:m,dtclose:y("\n"),ddopen:function(n){b(n),v(d+"  - ")},ddtext:m,ddclose:y("\n")},r({tableopen:function(n){j(),b(n),f.unshift("table")},tableclose:function(n){f.shift(),x(n),v(a.table.markdown()),j()},tropen:function(){a.table.data.unshift([])}},["th","td"].reduce(function(n,t){var e;return r({},n,(u(e={},t+"open",function(n){a.table.data[0]?a.table.data[0].unshift([]):a.table.data.unshift([]),b(n)}),u(e,t+"text",m),u(e,t+"close",function(n){x(n)}),e))},{})),{aopen:function(n,t){b(n);var e=t.href;l[e]||(l[e]=Object.keys(l).length+1),a.anchor.href=l[e],f.unshift("anchor")},atext:m,aclose:function(n){f.shift(),x(n),v(a.anchor.markdown())}},{inputopen:function(n,t){c[0]&&"li"===c[0]&&v("["+(void 0!==t.checked?"x":" ")+"] ")},hropen:function(){j(),v("----------------"),j()},bropen:j,imgopen:function(n,t){var e=t.alt,r=t.src;v("!["+(e||"image")+"]("+r+")")}});t.default=function(n,t){return{onopentag:function(n,t){var e=n+"open";if(w[e]){if(("anchor"===f[0]||"table"===f[0])&&-1!==i.indexOf(n))return;w[e](n,t)}},onclosetag:function(n){var t=n+"close";if(w[t]){if(("anchor"===f[0]||"table"===f[0])&&-1!==i.indexOf(n))return;w[t](n)}},ontext:function(n){var t=c[0]+"text";w[t]&&w[t](n)},onerror:function(n){return t(n)},onend:function(){var t,e=""+s().markdown()+(t=Object.keys(l).reduce(function(n,t){return r({},n,u({},l[t],t))},{}),Object.keys(t).sort().reduce(function(n,e){return n+"\n["+e+"]: "+t[e]},"\n"));return c=[],f=[],d="",l={},a.common.reset(),a.table.reset(),a.anchor.reset(),n(e)}}}},function(t,e){t.exports=n},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(e(3)),o=a(e(2));function a(n){return n&&n.__esModule?n:{default:n}}t.default=function(n){return new Promise(function(t,e){var a=new r.default.Parser((0,o.default)(t,e),{decodeEntities:!0,xmlMode:!0});a.write(n),a.end()})}}])});