!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("htmlparser2")):"function"==typeof define&&define.amd?define(["htmlparser2"],t):"object"==typeof exports?exports.htom=t(require("htmlparser2")):n.htom=t(n.htmlparser2)}(this,function(n){return function(n){var t={};function e(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=n,e.c=t,e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:o})},e.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=4)}([function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.rightPad=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return n.length>t?n:""+n+Array(t-n.length+1).join(e)},t.trim=function(n){return n.replace(/\s+/g," ")}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.anchor=t.table=t.common=void 0;var o=e(0),r=t.common={data:[],append:function(n){r.data.unshift(n)},pop:function(){r.data.shift()},lastText:function(){return r.data[0]},reset:function(){r.data=[]},markdown:function(){var n=r.data.reverse().join("").trim();return r.reset(),n}},u=t.table={data:[],append:function(n){u.data[0][0].unshift(n)},pop:function(){u.data[0][0].shift()},lastText:function(){return u.data[0]&&u.data[0][0]},markdown:function(){var n="",t="",e=[],r=[];return u.data.map(function(n){return n.reverse()}).forEach(function(n){e.unshift([]),n.forEach(function(n,t){var o=n.reverse().join("");e[0].push(o),(void 0===r[t]||r[t]<o.length)&&(r[t]=o.length)})}),r.forEach(function(n){t+="| "+Array(n+1).join("-")+" "}),t+="|\n",e.forEach(function(e,u){e.forEach(function(t,e){n+="| "+(0,o.rightPad)(t,r[e])+" "}),n+="|\n",0===u&&(n+=t)}),u.reset(),n},reset:function(){u.data=[],u.isHasHead=!1}},c=t.anchor={data:[],href:"",append:function(n){c.data.unshift(n)},pop:function(){c.data.shift()},lastText:function(){return c.data[0]},reset:function(){c.data=[],c.href=[]},markdown:function(){var n="["+c.data.reverse().join("")+"]["+c.href+"]";return c.reset(),n}}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},r=e(0),u=e(1);function c(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var i=["h1","h2","h3","h4","h5","h6","p","div","blockquote","ul","ol","dl","pre","br","hr"],a=[],f=[],l="",d={},s=function(){switch(f[0]){case"anchor":return u.anchor;case"table":return u.table;default:return u.common}},p=function(){return s().lastText()},h=function(){return s().pop()},v=function(n){return s().append(n)},b=function(n){a.unshift(n)},m=function(n){a[0]===n&&a.shift()},x=function(n){"code"===a[0]&&"pre"!==a[1]?"\n"!==n&&v(n):"pre"===a[0]||"code"===a[0]&&"pre"===a[1]?v(n):"\n"!==n&&""!==n.trim()&&v((0,r.trim)(n))},g=function(){var n=p();"\n"!==n&&"\n\n"!==n&&v("\n")},j=function(){var n=p();"\n"!==n&&"\n\n"!==n?v("\n\n"):"\n"===n&&(h(),v("\n\n"))},y=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){var e=p();m(t),"\n"===n||"\n\n"===n?"\n"===e?(h(),v("\n\n")):"\n\n"!==e&&v(n):v(n)}},O=function(n,t){var e;return c(e={},n+"open",function(n){return function(t){b(t),j(),v(Array(n+1).join("#")+" ")}}(t)),c(e,n+"text",x),c(e,n+"close",y("\n\n")),e},k=function(n,t){var e;return c(e={},n+"open",function(n){b(n),v(t)}),c(e,n+"text",x),c(e,n+"close",y(t)),e},_=o({},["p","div"].reduce(function(n,t){return o({},n,function(n){var t;return c(t={},n+"open",function(n){b(n),j(),"blockquote"===a[1]&&v("> ")}),c(t,n+"text",x),c(t,n+"close",y("\n\n")),t}(t))},{}),[1,2,3,4,5,6].reduce(function(n,t){return o({},n,O("h"+t,t))},{}),k("em","*"),k("del","~~"),k("strong","**"),{preopen:function(n){b(n),j(),v("```"),g()},pretext:x,preclose:function(n){m(n),g(),v("```"),j()}},{codeopen:function(n){a[0]&&"pre"===a[0]||v("`"),b(n)},codetext:x,codeclose:function(n){m(n),a[0]&&"pre"===a[0]||v("`")}},{blockquoteopen:function(n){b(n),j()},blockquotetext:x,blockquoteclose:y("\n\n")},["ol","ul"].reduce(function(n,t){return o({},n,function(n){var t;return c(t={},n+"open",function(n){"li"!==a[0]?j():(g(),"ul"===a[1]?l+="  ":"ol"===a[1]&&(l+="   ")),b(n)}),c(t,n+"text",function(){}),c(t,n+"close",function(n){m(n),"li"!==a[0]?j():"ul"===a[1]?l=l.slice(0,-2):"ol"===a[1]&&(l=l.slice(0,-3))}),t}(t))},{}),{liopen:function(n){"ul"===a[0]?v(l+"- "):"ol"===a[0]&&v(l+"1. "),b(n)},litext:x,liclose:function(n){m(n),"\n"!==p()&&v("\n")}},{dlopen:function(n){b(n),g()},dlclose:y("\n\n"),dtopen:function(n){b(n),v(l+"- ")},dttext:x,dtclose:y("\n"),ddopen:function(n){b(n),v(l+"  - ")},ddtext:x,ddclose:y("\n")},o({tableopen:function(n){j(),b(n),f.unshift("table")},tableclose:function(n){f.shift(),m(n),v(u.table.markdown()),j()},tropen:function(){u.table.data.unshift([])}},["th","td"].reduce(function(n,t){var e;return o({},n,(c(e={},t+"open",function(n){u.table.data[0].unshift([]),b(n)}),c(e,t+"text",x),c(e,t+"close",function(n){m(n)}),e))},{})),{aopen:function(n,t){b(n);var e=t.href;d[e]||(d[e]=Object.keys(d).length+1),u.anchor.href=d[e],f.unshift("anchor")},atext:x,aclose:function(n){f.shift(),m(n),v(u.anchor.markdown())}},{inputopen:function(n,t){a[0]&&"li"===a[0]&&v("["+(void 0!==t.checked?"x":" ")+"] ")},hropen:function(){j(),v("----------------"),j()},bropen:j,imgopen:function(n,t){var e=t.alt,o=t.src;v("!["+(e||"image")+"]("+o+")")}});t.default=function(n,t){return{onopentag:function(n,t){var e=n+"open";if(_[e]){if(("anchor"===f[0]||"table"===f[0])&&-1!==i.indexOf(n))return;_[e](n,t)}},onclosetag:function(n){var t=n+"close";if(_[t]){if(("anchor"===f[0]||"table"===f[0])&&-1!==i.indexOf(n))return;_[t](n)}},ontext:function(n){var t=a[0]+"text";_[t]&&_[t](n)},onerror:function(n){return t(n)},onend:function(){var t=""+s().markdown()+Object.keys(d).reduce(function(n,t){return n+"\n["+d[t]+"]: "+t},"\n");return a=[],f=[],l="",d={},u.common.reset(),u.table.reset(),u.anchor.reset(),n(t)}}}},function(t,e){t.exports=n},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=u(e(3)),r=u(e(2));function u(n){return n&&n.__esModule?n:{default:n}}t.default=function(n){return new Promise(function(t,e){var u=new o.default.Parser((0,r.default)(t,e),{decodeEntities:!0,xmlMode:!0});u.write(n),u.end()})}}])});